<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Strophe: util.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="contents">
<h1>util.c File Reference</h1>Utility functions.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#e7ab891499d8c50563b0457856a34e51">xmpp_strdup</a> (const xmpp_ctx_t *const ctx, const char *const <a class="el" href="lib_2expat_8h.html#755339d27872b13735c2cab829e47157">s</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">implement our own strdup that uses the ctx allocator  <a href="#e7ab891499d8c50563b0457856a34e51"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#c2f17ea599e5bc41aef1f34c0f16f849">time_stamp</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return an integer based time stamp.  <a href="#c2f17ea599e5bc41aef1f34c0f16f849"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint64_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#9cce40a083f7d375b4d9995fed4b62fa">time_elapsed</a> (uint64_t t1, uint64_t t2)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the time elapsed between two time stamps.  <a href="#9cce40a083f7d375b4d9995fed4b62fa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#c7e396e1cda3bddb6e0c23f98ae6098d">disconnect_mem_error</a> (xmpp_conn_t *const conn)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disconnect the stream with a memory error.  <a href="#c7e396e1cda3bddb6e0c23f98ae6098d"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Utility functions. 
<p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="e7ab891499d8c50563b0457856a34e51"></a><!-- doxytag: member="util.c::xmpp_strdup" ref="e7ab891499d8c50563b0457856a34e51" args="(const xmpp_ctx_t *const ctx, const char *const s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* xmpp_strdup           </td>
          <td>(</td>
          <td class="paramtype">const xmpp_ctx_t *const &nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const &nbsp;</td>
          <td class="paramname"> <em>s</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
implement our own strdup that uses the ctx allocator 
<p>
Duplicate a string. This function replaces the standard strdup library call with a version that uses the Strophe context object's allocator.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ctx</em>&nbsp;</td><td>a Strophe context object </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>a string</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>a new allocates string with the same data as s or NULL on error </dd></dl>

</div>
</div><p>
<a class="anchor" name="c2f17ea599e5bc41aef1f34c0f16f849"></a><!-- doxytag: member="util.c::time_stamp" ref="c2f17ea599e5bc41aef1f34c0f16f849" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t time_stamp           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return an integer based time stamp. 
<p>
This function uses gettimeofday or timeGetTime (on Win32 platforms) to compute an integer based time stamp. This is used internally by the event loop and timed handlers.<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>an integer time stamp </dd></dl>

</div>
</div><p>
<a class="anchor" name="9cce40a083f7d375b4d9995fed4b62fa"></a><!-- doxytag: member="util.c::time_elapsed" ref="9cce40a083f7d375b4d9995fed4b62fa" args="(uint64_t t1, uint64_t t2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t time_elapsed           </td>
          <td>(</td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>t1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&nbsp;</td>
          <td class="paramname"> <em>t2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the time elapsed between two time stamps. 
<p>
This function returns the time elapsed between t1 and t2 by subtracting t1 from t2. If t2 happened before t1, the result will be negative. This function is used internally by the event loop and timed handlers.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>t1</em>&nbsp;</td><td>first time stamp </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>t2</em>&nbsp;</td><td>second time stamp</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of milliseconds between the stamps </dd></dl>

</div>
</div><p>
<a class="anchor" name="c7e396e1cda3bddb6e0c23f98ae6098d"></a><!-- doxytag: member="util.c::disconnect_mem_error" ref="c7e396e1cda3bddb6e0c23f98ae6098d" args="(xmpp_conn_t *const conn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disconnect_mem_error           </td>
          <td>(</td>
          <td class="paramtype">xmpp_conn_t *const &nbsp;</td>
          <td class="paramname"> <em>conn</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Disconnect the stream with a memory error. 
<p>
This is a convenience function used internally by various parts of the Strophe library for terminating the connection because of a memory error.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>conn</em>&nbsp;</td><td>a Strophe connection object </td></tr>
  </table>
</dl>

</div>
</div><p>
</div>
</body>
</html>
